 <%= f.fields_for :value do |ff| %>
  <%= ff.hidden_field :service, value: 'aws_s3' %>
  <%= ff.fields_for :configs, configs do |fff| %>
    <div>
      <%= fff.label :access_key_id, 'Access key ID' %>
      <%= fff.text_field :access_key_id, value: configs['access_key_id'], required: true %>
    </div>
    <div>
      <%= fff.label :secret_access_key %>
      <%= fff.password_field :secret_access_key, value: configs['secret_access_key'], required: true %>
    </div>
    <div>
      <%= fff.label :region %>
      <%= fff.text_field :region, value: configs['region'], required: true %>
    </div>
    <div>
      <%= fff.label :bucket %>
      <%= fff.text_field :bucket, value: value['service'] == 'aws_s3' ? configs['bucket'] : '', required: true %>
    </div>
    <div>
      <%= fff.label :endpoint %>
      <%= fff.text_field :endpoint, value: configs['endpoint'], type: :url %>
      <small>
        For AWS S3 compantiable APIs like Minio.
      </small>
    </div>
  <% end %>
<% end %>
